<html>
	<head>
		<meta charset="utf-8">
		<meta title="Who Wants to be a Millioanire? - Controller">
		<title>(Beta) Who Wants to be a Millioanire? - Controller</title>
		<meta name="description" content="Who Wants to be a Millionaire? Quiz Edition for Desktop. This is the Controller's screen.">
		<style>
			#body{
				background-color: MidnightBlue;
			}
			#questiontable{
				border: none;
				table-layout: fixed;
				width: 70vw;
				position: absolute;
				left: 2vw;
				bottom: 2vw
			}
			td {
				width: 35vw;
			}
			.imgcontainer {
				position: relative;
				color: white;
				font-family: arial;
			}
			.tableimg {
				height: auto;
				width: 100%;
			}
			#questiontext {
				font-size: 2.2vw;
				display: table-cell; 
				text-align: center;
				vertical-align: middle; 
				position: absolute;
				top: 10%;
				left: 10%;
				width: 80%;
				height: 80%;
			}
			.answertext {
				font-size: 2vw;
				display: table-cell; 
				text-align: center;
				vertical-align: middle; 
				position: absolute;
				top: 27%;
				left: 2%;
				width: 80%;
				height: 80%;
			}
		</style>
		<script>
			function fillPrizesTable(values) {
				for (i = 0; i < values.length i++) {
					var dataTable = document.getElementById("prizestable");
					var dataRow = dataTable.insertRow(1);
					var dataCell1 = dataRow.insertCell(0);
					var dataCell2 = dataRow.insertCell(1);
					var dataCell3 = dataRow.insertCell(2);
					dataCell1.innerHTML = "<a id='prizes"+String(i+1)+"A'>"+String(i+1)+"</a>";
					dataCell1.innerHTML = "<a id='prizes"+String(i+1)+"B'>~</a>";
					dataCell1.innerHTML = "<a id='prizes"+String(i+1)+"C'>"+values[i]+"</a>";
				};
				
				var table = document.getElementById("prizestable");
				var row = table.insertRow(-1);
				var cell1 = row.insertCell(0);
				var cell2 = row.insertCell(1);
			};
			
			function onload(){
				localStorage.setItem('prizes', '{"list": ["£100","£200","£300","£500","£1,000","£2,000","£4,000","£8,000","£16,000","£32,000","£64,000","£125,000","£250,000","£500,000","£1,000,000"]}');
				fillPrizesTable((JSON.parse(localStorage.getItem("prizes"))).list)
				window.addEventListener("storage", storage_handler, false);
				function storage_handler(evt){
					//Check code receiveed from other window
					if ((evt.key == "verifycode")&&(evt.newValue == (sessionStorage.getItem("verifycodetemp"))+"A")) {
						document.getElementById("questiontext").innerHTML = "Screens synced<br>Ready to start...";
						localStorage.setItem("verifycode", localStorage.getItem("verifycode")+"A");
					};
				};
				localStorage.setItem("verifycode", parseInt(prompt("Open the contestant page and enter the code displayed there below:")));
				sessionStorage.setItem("verifycodetemp", localStorage.getItem("verifycode"));
			};
		</script>
	</head>
	<body onload="onload()" id="body">
		<table id="questiontable">
			<tr>
				<td colspan="2" id="questioncell">
					<div class="imgcontainer">
						<img src="images/millionaire large.png" class="tableimg">
						<div id="questiontext">CONTROLLER SCREEN</div>
					</div>
				</td>
			</tr>
			<tr>
				<td id="answer1cell">
					<div class="imgcontainer">
						<img src="images/millionaire small left.png" class="tableimg">
						<div class="answertext" id="answer1text"></div>
					</div>
				</td>
				<td id="answer2cell">
					<div class="imgcontainer">
						<img src="images/millionaire small right.png" class="tableimg">
						<div class="answertext" id="answer2text"></div>
					</div>
				</td>
			</tr>
			<tr>
				<td id="answer3cell">
					<div class="imgcontainer">
						<img src="images/millionaire small left.png" class="tableimg">
						<div class="answertext" id="answer3text"></div>
					</div>
				</td>
				<td id="answer4cell">
					<div class="imgcontainer">
						<img src="images/millionaire small right.png" class="tableimg">
						<div class="answertext" id="answer4text"></div>
					</div>
				</td>
			</tr>
		</table>
		<table id="prizestable">
		</table>
	</body>
</html>
